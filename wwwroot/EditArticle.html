<!DOCTYPE html>
<html>

<head>
    <title>Настройка статьи</title>
    <link href="css/style.css" type="text/css" rel="stylesheet">

    <!-- <script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> -->
    <script>
        function addSubtitle(c) {
            var form = c.parentNode.parentNode.parentNode;
            var num = 1 + Number(c.id);

            var deleted = c.parentNode;
            c.parentNode.parentNode.removeChild(deleted);


            var divSub = document.createElement('div');
            divSub.className = "edit_artcle_subtitle";

            var icon = document.createElement('img');
            icon.className = "edit_article_bottons edit_article_icon";
            icon.src = "css/icons/title.png";
            icon.title = "Подзаголовок";

            // var divLink = document.createElement('div');
            // divLink.className = "edit_artcle_link";

            // var imgLink = document.createElement('img');
            // imgLink.className = "edit_article_link_img";
            // imgLink.src = "css/icons/link.png";

            // var inputLinkWord = document.createElement("input");
            // inputLinkWord.type = "text";
            // inputLinkWord.name = "word" + num;
            // inputLinkWord.className = "edit_article_link_word";

            // var inputLinkLink = document.createElement("input");
            // inputLinkLink.type = "url";
            // inputLinkLink.name = "link" + num;
            // inputLinkLink.className = "edit_article_link_word edit_article_link_link";

            // var imgPlus = document.createElement('img');
            // imgPlus.className = "edit_article_link_img edit_article_link_plus";
            // imgPlus.src = "css/icons/+.png";


            var inputSub = document.createElement('input');
            inputSub.type = "text";
            inputSub.name = "subtitle" + num;
            inputSub.className = "edit_article_subtitle_field";

            var justDiv = document.createElement('div');

            var imgImg = document.createElement('img');
            imgImg.className = "edit_article_bottons";
            imgImg.src = "css/icons/image.png";
            imgImg.id = num;
            imgImg.title = "Добавить поле загрузки изображения";
            imgImg.onclick = function () { return addImage(imgImg) };

            var imgText = document.createElement('img');
            imgText.className = "edit_article_bottons";
            imgText.src = "css/icons/text.png";
            imgText.id = num;
            imgText.title = "Добавить поле ввода текста";
            imgText.onclick = function () { return addText(imgText) };

            // divLink.appendChild(imgLink);
            // divLink.appendChild(inputLinkWord);
            // divLink.appendChild(inputLinkLink);
            // divLink.appendChild(imgPlus);

            justDiv.appendChild(imgImg);
            justDiv.appendChild(imgText);

            // divSub.appendChild(divLink);
            divSub.appendChild(icon);
            divSub.appendChild(inputSub);
            divSub.appendChild(justDiv);

            form.appendChild(divSub);
        }

        function addImage(c) {
            var form = c.parentNode.parentNode.parentNode;
            var num = 1 + Number(c.id);

            var deleted = c.parentNode;
            c.parentNode.parentNode.removeChild(deleted);


            var divImg = document.createElement('div');
            divImg.className = "edit_article_img";

            var icon = document.createElement('img');
            icon.className = "edit_article_bottons edit_article_icon";
            icon.src = "css/icons/image.png";
            icon.title = "Изображение";



            var divPrev = document.createElement('div');
            divPrev.className = "edit_article_img_cont";

            var imgPrev = document.createElement('img');
            imgPrev.className = "edit_article_img_prev";
            imgPrev.src = "";
            imgPrev.onclick = function () {
                inputImg.click();
            }

            var inputImg = document.createElement('input');
            inputImg.type = "file";
            inputImg.multiple = "image/*";
            inputImg.accept = "image/*";
            inputImg.name = "f" + num;
            inputImg.className = "edit_article_img_down";
            inputImg.style = "opacity: 0;";
            inputImg.addEventListener("change",
                function () {
                    var reader = new FileReader();
                    reader.readAsDataURL(inputImg.files[0]);
                    reader.onload = function (e) {
                        imgPrev.src = e.target.result;
                    }
                });

            var dropImg = document.createElement('img');
            dropImg.className = "edit_article_drop_img";
            dropImg.src = "css/icons/+.png";
            dropImg.onclick = function () {
                imgPrev.src = "";
                console.log(inputImg.files[0]);
                inputImg.value="";
                console.log(inputImg.files[0]);
            }

            var downImg = document.createElement('img');
            downImg.className = "edit_article_img_down_icon";
            downImg.src = "css/icons/image.png";
            downImg.onclick = function () {
                inputImg.click();
            }




            var justDiv = document.createElement('div');

            var imgImg = document.createElement('img');
            imgImg.className = "edit_article_bottons";
            imgImg.src = "css/icons/image.png";
            imgImg.id = num;
            imgImg.title = "Добавить поле загрузки изображения";
            imgImg.onclick = function () { return addImage(imgImg) };

            var imgText = document.createElement('img');
            imgText.className = "edit_article_bottons";
            imgText.src = "css/icons/text.png";
            imgText.id = num;
            imgText.title = "Добавить поле ввода текста";
            imgText.onclick = function () { return addText(imgText) };

            var imgSub = document.createElement('img');
            imgSub.className = "edit_article_bottons";
            imgSub.src = "css/icons/title.png";
            imgSub.id = num;
            imgSub.title = "Добавить поле ввода подзаголовока";
            imgSub.onclick = function () { return addSubtitle(imgSub) };


            divPrev.appendChild(dropImg);
            divPrev.appendChild(imgPrev);
            divPrev.appendChild(downImg);
            divPrev.appendChild(inputImg);

            justDiv.appendChild(imgImg);
            justDiv.appendChild(imgText);
            justDiv.appendChild(imgSub);

            divImg.appendChild(icon);
            divImg.appendChild(divPrev);
            divImg.appendChild(justDiv);

            form.appendChild(divImg);
        }

        function addText(c) {
            var form = c.parentNode.parentNode.parentNode;
            var num = 1 + Number(c.id);

            var deleted = c.parentNode;
            c.parentNode.parentNode.removeChild(deleted);

            var divText = document.createElement('div');
            divText.className = "edit_artcle_text";

            var icon = document.createElement('img');
            icon.className = "edit_article_bottons edit_article_icon";
            icon.src = "css/icons/text.png";
            icon.title = "Текст";


            // var divLink = document.createElement('div');
            // divLink.className = "edit_artcle_link";

            // var imgLink = document.createElement('img');
            // imgLink.className = "edit_article_link_img";
            // imgLink.src = "css/icons/link.png";

            // var inputLinkWord = document.createElement("input");
            // inputLinkWord.type = "text";
            // inputLinkWord.name = "word" + num;
            // inputLinkWord.className = "edit_article_link_word";

            // var inputLinkLink = document.createElement("input");
            // inputLinkLink.type = "url";
            // inputLinkLink.name = "link" + num;
            // inputLinkLink.className = "edit_article_link_word edit_article_link_link";

            // var imgPlus = document.createElement('img');
            // imgPlus.className = "edit_article_link_img edit_article_link_plus";
            // imgPlus.src = "css/icons/+.png";


            var textArea = document.createElement('textarea');
            textArea.name = "text" + num;
            textArea.className = "edit_article_textarea";


            var justDiv = document.createElement('div');

            var imgImg = document.createElement('img');
            imgImg.className = "edit_article_bottons";
            imgImg.src = "css/icons/image.png";
            imgImg.id = num;
            imgImg.title = "Добавить поле загрузки изображения";
            imgImg.onclick = function () { return addImage(imgImg) };

            var imgSub = document.createElement('img');
            imgSub.className = "edit_article_bottons";
            imgSub.src = "css/icons/title.png";
            imgSub.id = num;
            imgSub.title = "Добавить поле ввода подзаголовока";
            imgSub.onclick = function () { return addSubtitle(imgSub) };


            // divLink.appendChild(imgLink);
            // divLink.appendChild(inputLinkWord);
            // divLink.appendChild(inputLinkLink);
            // divLink.appendChild(imgPlus);

            justDiv.appendChild(imgImg);
            justDiv.appendChild(imgSub);

            // divText.appendChild(divLink);
            divText.appendChild(icon);
            divText.appendChild(textArea);
            divText.appendChild(justDiv);

            form.appendChild(divText);
        }
    </script>
</head>


<body>
    <div class="wraper">

        <header>
            <!-- Блоги -->
            <a href="https://ru.wikipedia.org/wiki/%D0%92%D0%B8%D0%BA%D0%B8">
                <img class="header_oak_icon" src="css/icons/oak.png">
                <div class="header_oak_name">ДУБ</div>
            </a>

            <!-- Разделы -->
            <a href="https://ru.wikipedia.org/wiki/%D0%92%D0%B8%D0%BA%D0%B8">
                <div class="header_branch_name">Ветви</div>
                <img class="header_branch_icon" src="css/icons/branch.png">
            </a>

            <!-- Профиль -->
            <a href="https://ru.wikipedia.org/wiki/%D0%92%D0%B8%D0%BA%D0%B8">
                <img class="header_profile" src="css/icons/acorn.png">
            </a>

            <!-- Новости из избранного -->
            <a href="https://ru.wikipedia.org/wiki/%D0%92%D0%B8%D0%BA%D0%B8">
                <img class="header_favorite" src="css/icons/leaf.png"></a>
        </header>


        <div class="content">
            <form action="">
                <!-- Раздел -->
                <label class="edit_section_record">Ветвь:</label>
                <select name="section" class="edit_section_parent">
                    <option value="1" class="edit_section_parent_section">Раздел</option>
                    <option value="2" class="edit_section_parent_section">Раздел1</option>
                    <option value="3" class="edit_section_parent_section">Раздел2</option>
                </select>

                <!-- Название -->
                <label class="edit_section_record">Название:</label>
                <input type="text" name="name" class="edit_profile_name edit_section_name">


                <label class="edit_section_record">Содержание:</label>

                <div>
                    <!-- Текст -->
                    <div class="edit_artcle_text">

                        <img title="Текст" class="edit_article_bottons edit_article_icon" src="css/icons/text.png">
                        <!-- Гиперссылка -->
                        <!-- <div class="edit_artcle_link">
                            <img class="edit_article_link_img" src="css/icons/link.png">
                            <input type="text" name="word" class="edit_article_link_word">
                            <input type="url" name="link" class="edit_article_link_word edit_article_link_link">
                            <img class="edit_article_link_img edit_article_link_plus" src="css/icons/+.png">
                        </div> -->
                        <!-- Поле ввода -->
                        <textarea name="text0" class="edit_article_textarea"></textarea>

                        <div>
                            <img id="0" class="edit_article_bottons" src="css/icons/image.png"
                                title="Добавить поле загрузки изображения" onclick="return addImage(this)">
                            <img id="0" class="edit_article_bottons" src="css/icons/title.png"
                                title="Добавить поле ввода подзаголовока" onclick="return addSubtitle(this)">
                        </div>

                    </div>
                </div>

                <button class="standart_buttom edit_profile_botton">Сохранить</button>
                <button class="standart_buttom edit_profile_botton">Удалить статью</button>
            </form>
        </div>
        <footer>
            OAK 2020 Inc.
        </footer>
    </div>
</body>

</html>