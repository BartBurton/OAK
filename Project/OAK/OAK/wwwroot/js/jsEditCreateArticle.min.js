function makeIcon(n,t,i){var r=document.createElement("img");return r.className=n,r.src=t,r.title=i,r}function buttomAddText(n){var t=makeIcon("edit_article_buttoms","/icons/text.png","Добавить поле ввода текста");return t.id=n,t.onclick=function(){return addFieldText(t.id)},t}function buttomAddSubtitle(n){var t=makeIcon("edit_article_buttoms","/icons/title.png","Добавить поле ввода подзаголовока");return t.id=n,t.onclick=function(){return addFieldSubtitle(t.id)},t}function buttomAddImage(n){var t=makeIcon("edit_article_buttoms","/icons/image.png","Добавить поле загрузки изображения");return t.id=n,t.onclick=function(){return addFieldImage(t.id)},t}function makeButtoms(n){var t=document.createElement("div");return t.className="edit_article_buttoms_cont",t.id="b"+n,t.appendChild(buttomAddImage(n)),t.appendChild(buttomAddText(n)),t.appendChild(buttomAddSubtitle(n)),t}function removeButtoms(n){var t=document.getElementById("b"+n);t.parentElement.removeChild(t)}function makeContainer(n,t,i,r){var u=document.createElement("div"),f;return u.className=n,u.id="c"+t,f=makeIcon("edit_article_drop","/icons/plus.png","Сброс поля"),f.onclick=function(){u.parentNode.removeChild(u)},u.appendChild(f),u.appendChild(i),u.appendChild(r),u}function addField(n,t){var r=makeButtoms(t),i;removeButtoms(Number(t)-1);i=document.getElementById("fields");i.appendChild(n);i.appendChild(r)}function fieldText(n){var t=document.createElement("textarea");return t.id="text"+n,t.name="text"+n,t.className="edit_article_textarea",t}function addFieldText(n){var t=Number(n)+1,i=makeIcon("edit_article_icon","/icons/text.png","Текст"),r=fieldText(t),u=makeContainer("edit_artcle_text",t,i,r);addField(u,t)}function fieldSubtitle(n){var t=document.createElement("input");return t.type="text",t.id="sub"+n,t.name="sub"+n,t.className="edit_article_subtitle_field",t}function addFieldSubtitle(n){var t=Number(n)+1,i=makeIcon("edit_article_icon","/icons/title.png","Подзаголовок"),r=fieldSubtitle(t),u=makeContainer("edit_artcle_subtitle",t,i,r);addField(u,t)}function fieldImage(n){var r=document.createElement("div"),i,t,u;return r.className="edit_article_img_cont",i=document.createElement("img"),i.className="edit_article_img_prev",i.id="preview"+n,i.src="",i.onclick=function(){t.click()},t=document.createElement("input"),t.type="file",t.multiple="image/*",t.accept="image/*",t.id="img"+n,t.name="img"+n,t.className="edit_article_img_down",t.style="opacity: 0;",t.addEventListener("change",function(){var n=new FileReader;n.readAsDataURL(t.files[0]);n.onload=function(n){i.src=n.target.result}}),u=makeIcon("edit_article_img_down_icon","/icons/image.png","Загрузить изображение"),u.onclick=function(){t.click()},r.appendChild(i),r.appendChild(u),r.appendChild(t),r}function addFieldImage(n){var t=Number(n)+1,i=makeIcon("edit_article_icon","/icons/image.png","Изображение"),r=fieldImage(t),u=makeContainer("edit_article_img",t,i,r);addField(u,t)}function toSetDrop(n,t){var r=document.getElementById(n),i=document.getElementById(t);r.onclick=function(){i.parentNode.removeChild(i)}}function toSetInput(n,t,i){var r=document.getElementById(n),u=document.getElementById(t),f=document.getElementById(i);u.onclick=function(){r.click()};f.onclick=function(){r.click()};r.addEventListener("change",function(){var n=new FileReader;n.readAsDataURL(r.files[0]);n.onload=function(n){u.src=n.target.result}})}